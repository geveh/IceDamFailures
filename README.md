# Changes in ice-dam failures with ongoing glacier decay

## Overview

**This repository contains seven scripts to identify trends in the GLOF volume (*V*<sub>0</sub>), peak discharge (*Q*<sub>p</sub>), timing (day of year *doy*), and source elevation (*Z*) of ice-dam failures on regional and local (i.e. lake-level) scale. Furthermore, we investigate the consequences of melting glacier dams on the magnitudes of GLOFs**

- 01_lake_area_volume.R
- 02_quantile_regression.R
- 03_local_trends_in_V0_and_Qp.R
- 04_trends_in_doy.R
- 05_XXX.R
- 06_XXX.R
- 07_magnitudes_vs_elev_change.R

The codes are written in the statistical programming language **R** (https://www.r-project.org/), Version 4.0.0, and called within
the Graphical User Interface **RStudio** (https://rstudio.com) under a Microsoft Windows 10 operating system. 
Please install both **R and RStudio** on your machine to successfully run the codes and produce figures and R data objects.

The R codes also depend on a number of packages, listed at the beginning of both scripts. Please install those packages before running the codes. 
The comments within the scripts provide further details on model dependencies and usage of functions. 

Each script will call one or more input data object(s), which will be made available via Zenodo soon. 
Please put all input files into the same folder. The scripts can be run sequentially with output generated by the user, which will be used as input in the
next script. The scripts (and parts thereof) can also be run independent of each other using the input files from Zenodo.

## Scripts

### 01_lake_area_volume.R

**Script to predict glacier lake volume from glacier lake area. We use a Bayesian piece-wise
regression model that objectively learns the location of breakpoint in the empirical relationship between lake volume and lake area.**

*Mandatory input data*: 
- "Global_GLOF_database_2021_12_08.ods" (table with all reported GLOFs according to the Global GLOF database)
- "lake_area_volume_compiliaton.xlsx" (table with previously reported data pairs of volume and area of glacier lakes)

*Output*: 
- "va_breakpoint.pdf" / "va_breakpoint.png" (Plot of the piece-wise regression model)
- "va_model.RDS" (R-object of the fitted volume-area-relationship using the package mcp)
---

### 02_quantile_regression.R

**Script to fit quantile regression models (50th and 90th percentile) of peak discharges and volumes versus time 
from ice-dam failures in six mountain ranges.**

*Mandatory input data*: 
- "Global_GLOF_database_2021_12_08.ods" (table with all reported GLOFs according to the Global GLOF database)

*Output*: 
- "all_glofs_tibble.RDS" (R-object with a preprocessed table of all reported GLOFs)
- "qp_regional_quantreg_fits.RDS" (R-object with a quantile regression model of V<sub>0</sub> and Q<sub>p</sub> versus time for the 50th and 90th percentile for each region)
- "qp_regional_quantreg_posteriors.RDS" (R-object of the posterior predictive distribution of V<sub>0</sub> and Q<sub>p</sub> for each region and both percentiles for each year in the period 1900-2021)
- "qp_regional_quantreg_trends.RDS" (R-object of posterior trends in V<sub>0</sub> and Q<sub>p</sub> for each region and both percentiles)
- "qp_regional_medline.RDS" (R-object of median temporal change in V<sub>0</sub> and Q<sub>p</sub> for each region and both percentiles)
---

### 03_local_trends_in_V0_and_Qp.R

**Script to estimate trends in V<sub>0</sub> and Q<sub>p</sub> for individual ice-dammed lakes with repeat outburst.** 

*Mandatory input data*: 
- "all_glofs_tibble.RDS" (R-object with a preprocessed table of all reported GLOFs)
- "va_model.RDS" (R-object of the fitted volume-area-relationship. Will be used to make new predictions of lake volume from mapped lake area)

*Output*: 

GLOF volume  V<sub>0</sub>
- "all_glofs_V0_tibble.RDS" (Table of lakes with repeat GLOFs and reported V<sub>0</sub>)
- "local_V0_model.RDS" (Hierarchical regression model of V<sub>0</sub> versus time for individual glacier lakes)
- "regression_V0_per_lake.pdf" / "regression_V0_per_lake.png" (Plot of the posterior trends in V<sub>0</sub> for each lake)
- "post_trend_V0_per_lake.pdf" / "post_trend_V0_per_lake.png" (Plot of the posterior regression slope of V<sub>0</sub> versus time)
- "all_glofs_V0_tibble.RDS" (Table of lakes with repeat GLOFs and reported V<sub>0</sub>)

GLOF peak discharge Q<sub>p</sub>
- "all_glofs_qp_tibble.RDS" (Table of lakes with repeat GLOFs and reported Q<sub>p</sub>)
- "local_qp_model.RDS" (Hierarchical regression model of Q<sub>0</sub> versus time for individual glacier lakes)
- "regression_Qp_per_lake.pdf" / "regression_Qp_per_lake.png" (Plot of the posterior trends in Q<sub>p</sub> for each lake)
- "post_trend_Qp_per_lake.pdf" / "post_trend_Qp_per_lake.png" (Plot of the posterior regression slope of Q<sub>p</sub> versus time)
- "all_glofs_qp_tibble.RDS" (Table of lakes with repeat GLOFs and reported Q<sub>p</sub>)
---

### 04_trends_in_doy.R

**Script to estimate trends in the annual timing (i.e. day in a given year) of ice-dam failures on regional and local scale.**

*Mandatory input data*: 
- "all_glofs_tibble.RDS" (R-object with a preprocessed table of all reported GLOFs)

*Output*: 
- "doy_trends_per_region.RDS" (R-object with regression models of *doy* versus time for all dated GLOFs in the six regions).
- "doy_change.pdf" / "doy_change.png" (Plot of the temporal trends in *doy* for each region, including the posterior differences in *doy* between 2021 and 1900)
- "doy_trends_per_glacier.RDS"  (R-object with regression models of *doy* versus time for lakes with repeat GLOFs)
- "regression_doy_per_lake.pdf" / "regression_doy_per_lake.png" (Plot of local changes in *doy* versus time)
- "post_trend_doy_per_lake.pdf" / "post_trend_doy_per_lake.png" (Plot of local  posterior differences in *doy* for each lake)
---

### 05_XXX.R

*Description TBA*

*Mandatory input data*: TBA

*Output*: TBA

---

### 06_XXX.R

*Description TBA*

*Mandatory input data*: TBA

*Output*: TBA

---

### 07_magnitudes_vs_elev_change.R

**Script to estimate local trends of  V<sub>0</sub> and  Q<sub>p</sub> with elevation change of the glacier dam.**

*Mandatory input data*: 

- Folder "dh_pergla_cut": tables of cumulative elevation change for glaciers with repeat GLOFs between 2000 and 2019
- "all_glofs_tibble.RDS" (R-object with a preprocessed table of all reported GLOFs)
- "all_glofs_V0_tibble.RDS" (Table of lakes with repeat GLOFs and reported V<sub>0</sub>)
- "all_glofs_qp_tibble.RDS" (Table of lakes with repeat GLOFs and reported Q<sub>p</sub>)

*Output*: 

- "map_and_trends.pdf" (Map of lakes with repeat GLOFs between 2000 and 2019; local trends of V0 and Qp with cumulative changes in glacier dam elevation)
---

## Input data

To obtain the input data, visit Zenodo: link **to appear here soon**.


## References

Georg Veh, Natalie LÃ¼tzow, Jenny Tamm, Romain Hugonnet, Marten Geertsema, John J Clague, and Oliver Korup: *Smaller and earlier outbursts from ice-dammed lakes with ongoing glacier decay* (submitted).

## See also

http://glofs.geoecology.uni-potsdam.de

## Contact

**Georg Veh**  
Working group on natural hazards  
University of Potsdam  
georg.veh@uni-potsdam.de  

https://www.uni-potsdam.de/de/umwelt/forschung/ag-naturgefahren.html
